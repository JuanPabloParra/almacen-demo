<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF‑8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ingresar Producto | Almacén ABC</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    body { background-color: #f9fbfc; font-family: 'Segoe UI', sans-serif; }
    .navbar { background-color: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
    .navbar-brand { font-weight:700; font-size:1.5rem; color:#198754 !important;}
    .nav-link { font-weight:500; color:#555 !important; }
    .nav-link:hover, .nav-link.active { color:#198754 !important; }
    .login-icon { font-size:1.5rem; color:#555; cursor:pointer; transition:color .3s;}
    .login-icon:hover { color:#198754; }
    main { padding:60px 0; }
    .form-container { max-width:600px; margin:auto; background:#fff; padding:40px 30px; border-radius:15px; box-shadow:0 8px 20px rgba(0,0,0,0.05);}
    h2 { color:#0f5132; font-weight:700; margin-bottom:30px; }
    .btn-primary { background:#198754; border-color:#198754; border-radius:30px; font-size:1.1rem; }
    .btn-primary:hover { background:#157347; border-color:#157347; }
    footer { background-color:#effaf4; padding:2rem 0; text-align:center; color:#333; margin-top:80px;}
    .social-icons a { color:#198754; margin:0 10px; font-size:1.5rem; transition:color .3s; }
    .social-icons a:hover { color:#0f5132;}
  </style>
</head>
<body>
<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand" href="index.html"><i class="bi bi-box-seam-fill me-2"></i>Almacén <span style="color:#0f5132;">ABC</span></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav align-items-center">
        <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
        <li class="nav-item"><a class="nav-link" href="consulta.html">Consultar productos</a></li>
        <li class="nav-item"><a class="nav-link active" href="ingreso.html">Ingresar productos</a></li>
        <li class="nav-item" id="adminHistorial" style="display:none;"><a class="nav-link" href="historial.html">Historial de movimientos</a></li>
        <li class="nav-item"><a class="nav-link" href="#" id="btnIdioma"><i class="bi bi-translate"></i></a></li>
        <li class="nav-item dropdown" id="dropdownLogin">
          <a class="nav-link dropdown-toggle" href="#" id="userDropdown" data-bs-toggle="dropdown">
            <i class="bi bi-person-circle login-icon"></i>
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><span class="dropdown-item-text fw-bold" id="adminName">Admin</span></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="perfil.html"><i class="bi bi-person-lines-fill"></i> Perfil</a></li>
            <li><a class="dropdown-item text-danger logout-icon" href="#" data-bs-toggle="modal" data-bs-target="#confirmLogoutModal">
              <i class="bi bi-box-arrow-right"></i> Cerrar sesión</a></li>
          </ul>
        </li>
        <li class="nav-item ms-3" id="loginButton">
          <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#loginModal"><i class="bi bi-person-circle login-icon"></i></a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<main>
  <div class="container">
    <div class="form-container">
      <h2 class="text-center">Ingresar Producto</h2>
      <div id="alertaExito" class="alert alert-success d-none" role="alert">
        <i class="bi bi-check-circle-fill me-2"></i><div>Producto insertado con éxito.</div>
      </div>
      <div id="alertaError" class="alert alert-danger d-none" role="alert">
        <i class="bi bi-x-circle-fill me-2"></i><div>Solo puedes poner texto en el campo de nombre, no números.</div>
      </div>
      <form id="formularioProducto" novalidate>
        <div class="mb-3"><label for="nombre" class="form-label">Nombre</label>
          <input type="text" id="nombre" class="form-control" required pattern="[A-Za-záéíóúÁÉÍÓÚñÑ\s]+"
            title="Solo letras y espacios" />
        </div>
        <div class="mb-3"><label for="descripcion" class="form-label">Descripción</label>
          <input type="text" id="descripcion" class="form-control" required />
        </div>
        <div class="mb-3"><label for="precio" class="form-label">Precio</label>
          <input type="number" id="precio" class="form-control" step="0.01" min="0" required />
        </div>
        <button type="submit" class="btn btn-primary w-100">Ingresar Producto</button>
      </form>
    </div>
  </div>
</main>

<footer>
  <div class="container">
    <p class="mb-2">© 2025 <strong>Almacén ABC</strong> — Todos los derechos reservados</p>
    <div class="social-icons">
      <a href="#"><i class="bi bi-facebook"></i></a>
      <a href="#"><i class="bi bi-instagram"></i></a>
      <a href="#"><i class="bi bi-twitter"></i></a>
    </div>
  </div>
</footer>

<!-- Login Modal -->
<div class="modal fade" id="loginModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-4 shadow">
      <div class="modal-header border-0"><h5 class="modal-title">Iniciar Sesión</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
      <div class="modal-body">
        <form id="loginForm"><div class="mb-3">
            <label class="form-label">Correo</label><input type="email" class="form-control" required id="correo" />
          </div><div class="mb-3">
            <label class="form-label">Contraseña</label><input type="password" class="form-control" required id="contrasena" />
          </div>
          <button type="submit" class="btn btn-primary">Iniciar sesión</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Logout Confirmation Modal -->
<div class="modal fade" id="confirmLogoutModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-4 shadow">
      <div class="modal-header border-0">
        <h5 class="modal-title text-danger">¿Estás seguro?</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
      <div class="modal-body text-center">
        <p class="fs-5">¿Deseas cerrar sesión?</p>
        <div class="d-flex justify-content-center gap-3 mt-4">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button class="btn btn-danger" id="confirmLogout">Sí, cerrar sesión</button>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/main.js"></script>
<script src="assets/js/datos.js"></script>
<script src="assets/js/negocio.js"></script>


<script>
$(document).ready(function () {
  const adminCorreo = localStorage.getItem('admin-user');
  const adminNombre = localStorage.getItem('admin-name');
  if (adminCorreo && adminNombre) {
    $('#loginButton').hide();
    $('#dropdownLogin').show();
    $('#adminName').text(adminNombre);
    $('#adminHistorial').show();
  } else {
    $('#loginButton').show();
    $('#dropdownLogin').hide();
  }

  $('#loginForm').on('submit', function(e) {
    e.preventDefault();
    const correo = $('#correo').val(), contrasena = $('#contrasena').val();
    if (correo === 'admin@demo.com' && contrasena === '1234') {
      localStorage.setItem('admin-user', correo);
      localStorage.setItem('admin-name', 'Administrador');
      $('#loginModal').modal('hide');
      location.reload();
    } else alert('Usuario o contraseña incorrectos');
  });

  $('#confirmLogout').on('click', () => {
    localStorage.removeItem('admin-user');
    localStorage.removeItem('admin-name');
    location.reload();
  });

  $('#formularioProducto').on('submit', function(e) {
    e.preventDefault();
    const name = $('#nombre').val().trim();
    const desc = $('#descripcion').val().trim();
    const price = parseFloat($('#precio').val());
    $('#alertaExito, #alertaError').addClass('d-none');
    if (!/^[A-Za-záéíóúÁÉÍÓÚñÑ\s]+$/.test(name)) {
      $('#alertaError').removeClass('d-none');
      return;
    }
    if (!desc || isNaN(price) || price <= 0) {
      alert('Completa bien todos los campos');
      return;
    }
    $('#alertaExito').removeClass('d-none');
    this.reset();
  });

  // traducción
  const pares = [
    ['Ingresar Producto','Add Product'],
    ['Producto insertado con éxito.','Product successfully inserted.'],
    ['Solo puedes poner texto en el campo de nombre, no números.','Only letters allowed in name field.'],
    ['Inicio','Home'], ['Consultar productos','View products'], ['Ingresar productos','Add products'],
    ['Historial de movimientos','Movement history'], ['Perfil','Profile'], ['Cerrar sesión','Log out'],
    ['Correo','Email'], ['Contraseña','Password'], ['¿Estás seguro?','Are you sure?'],
    ['¿Deseas cerrar sesión?','Do you want to log out?'], ['Cancelar','Cancel'], ['Sí, cerrar sesión','Yes, log out']
  ];
  function traducir(lang) {
    const from = lang === 'es' ? 1 : 0, to = lang === 'es' ? 0 : 1;
    $('[class*=nav-link], h2, .form-label, .btn, .modal-title, .alert, .fs-5').each(function(){
      const txt = $(this).text().trim();
      pares.forEach(p => { if (txt===p[from]) $(this).text(p[to]); });
    });
  }
  const idioma = localStorage.getItem('idioma') || 'es';
  traducir(idioma);
  $('#btnIdioma').on('click', function(){
    const nuevo = (localStorage.getItem('idioma')||'es')==='es'?'en':'es';
    localStorage.setItem('idioma', nuevo);
    traducir(nuevo);
  });
});
</script>
</body>
</html>
